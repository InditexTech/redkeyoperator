# SPDX-FileCopyrightText: 2025 INDUSTRIA DE DISEÃ‘O TEXTIL, S.A. (INDITEX, S.A.)
#
# SPDX-License-Identifier: Apache-2.0

apiVersion: redis.inditex.dev/v1
kind: RedkeyCluster
metadata:
  annotations:
    amiga-admin: ""
    paas-details: |
      {"workloads":[{"kind":"StatefulSet", "name":"redkey-cluster-test"}]}
    technology: redis_7.4.0
  labels:
    app: redkey-cluster-test
    application: redis-app
    slot: test
    technology: redis_7.4.0
    version: 7.4.0
    redkey-cluster-name: redkey-cluster-test
    redis.redkeycluster.operator/component: redis
  name: redkey-cluster-test
spec:
  config: |
    save ""
    appendonly no
    maxmemory 90mb
  deletePVC: false
  ephemeral: true
  purgekeysonrebalance: true
  image: redis/redis-stack-server:7.4.0-v3
  labels:
    application: redis-app
    deployment: redkey-cluster-test
    slot: test
    technology: redis_7.4.0
    version: 7.4.0
  pdb:
    enabled: true
    pdbSizeAvailable: 50%
    pdbSizeUnavailable: 0
  primaries: 3
  resources:
    limits:
      cpu: 100m
      memory: 128Mi
